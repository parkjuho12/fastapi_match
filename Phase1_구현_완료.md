# Phase 1 êµ¬í˜„ ì™„ë£Œ âœ…

## ğŸ“‹ êµ¬í˜„ëœ ê¸°ëŠ¥

### 1. ê°¤ëŸ¬ë¦¬ ì‹œìŠ¤í…œ API (3ê°œ)

#### 1.1 ì´ë¯¸ì§€ ì—…ë¡œë“œ
```
POST /groups/{group_id}/gallery/
```
**ìš”ì²­ (multipart/form-data)**:
- `image`: UploadFile (í•„ìˆ˜) - ì´ë¯¸ì§€ íŒŒì¼
- `description`: string (ì„ íƒ) - ì´ë¯¸ì§€ ì„¤ëª…

**ì‘ë‹µ**: `GroupGalleryResponse`
```json
{
  "image_id": 1,
  "group_id": 1,
  "uploaded_by": 1,
  "uploader_name": "í™ê¸¸ë™",
  "image_url": "/static/images/groups/1/gallery/20240108_143000_1.jpg",
  "file_name": "sample.jpg",
  "file_size": 102400,
  "description": "ê·¸ë£¹ í™œë™ ì‚¬ì§„",
  "created_at": "2024-01-08T14:30:00"
}
```

**ê¶Œí•œ**: ê·¸ë£¹ ë©¤ë²„ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥  
**íŒŒì¼ ì œí•œ**: 10MB, ì´ë¯¸ì§€ íŒŒì¼ë§Œ ê°€ëŠ¥

---

#### 1.2 ê°¤ëŸ¬ë¦¬ ëª©ë¡ ì¡°íšŒ
```
GET /groups/{group_id}/gallery/?skip=0&limit=50
```

**ì‘ë‹µ**: `GroupGalleryListResponse`
```json
{
  "images": [
    {
      "image_id": 1,
      "group_id": 1,
      "uploaded_by": 1,
      "uploader_name": "í™ê¸¸ë™",
      "image_url": "/static/images/groups/1/gallery/20240108_143000_1.jpg",
      "file_name": "sample.jpg",
      "file_size": 102400,
      "description": "ê·¸ë£¹ í™œë™ ì‚¬ì§„",
      "created_at": "2024-01-08T14:30:00"
    }
  ],
  "total_count": 10
}
```

**ê¶Œí•œ**: 
- ê³µê°œ ê·¸ë£¹: ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥
- ë¹„ê³µê°œ ê·¸ë£¹: ë©¤ë²„ë§Œ ì¡°íšŒ ê°€ëŠ¥

---

#### 1.3 ì´ë¯¸ì§€ ì‚­ì œ
```
DELETE /groups/{group_id}/gallery/{image_id}
```

**ì‘ë‹µ**:
```json
{
  "message": "ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

**ê¶Œí•œ**: 
- ì´ë¯¸ì§€ ì—…ë¡œë” ë³¸ì¸
- ë˜ëŠ” ê·¸ë£¹ ê´€ë¦¬ì(owner, admin)

**ì‚­ì œ ë°©ì‹**: ì†Œí”„íŠ¸ ì‚­ì œ + ì‹¤ì œ íŒŒì¼ ì‚­ì œ

---

### 2. ê·¸ë£¹ ë©¤ë²„ ì—­í•  ë³€ê²½ API (1ê°œ)

#### 2.1 ë©¤ë²„ ì—­í•  ë³€ê²½
```
PUT /groups/{group_id}/members/{user_id}/role/
```

**ìš”ì²­**: `GroupMemberRoleUpdate`
```json
{
  "role": "admin"  // "admin" ë˜ëŠ” "member"
}
```

**ì‘ë‹µ**: `GroupMemberResponse`
```json
{
  "member_id": 1,
  "group_id": 1,
  "user_id": 2,
  "user_name": "ê¹€ì² ìˆ˜",
  "role": "admin",
  "status": "approved",
  "joined_at": "2024-01-05T10:00:00"
}
```

**ê¶Œí•œ**: 
- owner: adminê³¼ member ì—­í•  ë³€ê²½ ê°€ëŠ¥
- admin: member ì—­í• ë§Œ ë³€ê²½ ê°€ëŠ¥

**ì œì•½ì‚¬í•­**:
- owner ì—­í• ì€ ë³€ê²½ ë¶ˆê°€
- ownerë¡œ ìŠ¹ê²© ë¶ˆê°€
- adminì˜ ì—­í• ì€ ownerë§Œ ë³€ê²½ ê°€ëŠ¥

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì„œë²„ ì¬ì‹œì‘
```bash
cd /Users/bagjuho/Desktop/ë§¤ì¹­\ ì•±\(fast\ api\)
python3 main.py
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
- ì„œë²„ ì‹œì‘ ì‹œ "âœ… ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±/í™•ì¸ ì™„ë£Œ" ë©”ì‹œì§€ í™•ì¸
- ì—°ê²° ì‹¤íŒ¨ ì‹œ `app/models/database.py`ì˜ DB ì„¤ì • í™•ì¸

### 3. API í…ŒìŠ¤íŠ¸ (Postman/Thunder Client)

#### ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
```
POST http://localhost:8000/groups/1/gallery/
Headers:
  Authorization: Bearer {your_token}
Body (form-data):
  image: [ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ]
  description: "í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€"
```

#### ê°¤ëŸ¬ë¦¬ ëª©ë¡ ì¡°íšŒ í…ŒìŠ¤íŠ¸
```
GET http://localhost:8000/groups/1/gallery/
Headers:
  Authorization: Bearer {your_token}
```

#### ì´ë¯¸ì§€ ì‚­ì œ í…ŒìŠ¤íŠ¸
```
DELETE http://localhost:8000/groups/1/gallery/1
Headers:
  Authorization: Bearer {your_token}
```

#### ë©¤ë²„ ì—­í•  ë³€ê²½ í…ŒìŠ¤íŠ¸
```
PUT http://localhost:8000/groups/1/members/2/role/
Headers:
  Authorization: Bearer {your_token}
  Content-Type: application/json
Body:
{
  "role": "admin"
}
```

---

## ğŸ“ íŒŒì¼ ì €ì¥ ìœ„ì¹˜

ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ëŠ” ë‹¤ìŒ ê²½ë¡œì— ì €ì¥ë©ë‹ˆë‹¤:
```
static/images/groups/{group_id}/gallery/{timestamp}_{user_id}.{ext}
```

ì˜ˆì‹œ:
```
static/images/groups/1/gallery/20240108_143000_1.jpg
```

---

## ğŸ”’ ê¶Œí•œ ì •ë¦¬

| API | í•„ìš” ê¶Œí•œ | ì„¤ëª… |
|-----|----------|------|
| ì´ë¯¸ì§€ ì—…ë¡œë“œ | ê·¸ë£¹ ë©¤ë²„ | í™œì„± ë©¤ë²„ë§Œ ê°€ëŠ¥ |
| ê°¤ëŸ¬ë¦¬ ì¡°íšŒ | ê³µê°œ: ëˆ„êµ¬ë‚˜<br>ë¹„ê³µê°œ: ë©¤ë²„ | - |
| ì´ë¯¸ì§€ ì‚­ì œ | ì—…ë¡œë” ë³¸ì¸ ë˜ëŠ” ê´€ë¦¬ì | owner, admin |
| ì—­í•  ë³€ê²½ | owner ë˜ëŠ” admin | ì œì•½ì‚¬í•­ ìˆìŒ |

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ê°¤ëŸ¬ë¦¬ ì‹œìŠ¤í…œ
1. **íŒŒì¼ í¬ê¸°**: 10MB ì œí•œ
2. **íŒŒì¼ í˜•ì‹**: ì´ë¯¸ì§€ íŒŒì¼ë§Œ ê°€ëŠ¥ (image/*)
3. **ì‚­ì œ ë°©ì‹**: ì†Œí”„íŠ¸ ì‚­ì œ (`is_deleted=True`) + ì‹¤ì œ íŒŒì¼ ì‚­ì œ
4. **ë””ë ‰í† ë¦¬**: ìë™ ìƒì„± (os.makedirs)

### ë©¤ë²„ ì—­í•  ë³€ê²½
1. **ownerëŠ” ë³€ê²½ ë¶ˆê°€**: ê·¸ë£¹ ì†Œìœ ìì˜ ì—­í• ì€ ì ˆëŒ€ ë³€ê²½ ë¶ˆê°€
2. **ownerë¡œ ìŠ¹ê²© ë¶ˆê°€**: ë©¤ë²„ë¥¼ ownerë¡œ ë§Œë“¤ ìˆ˜ ì—†ìŒ
3. **admin ë³€ê²½ ì œí•œ**: adminì˜ ì—­í• ì€ ownerë§Œ ë³€ê²½ ê°€ëŠ¥
4. **ê¶Œí•œ ì²´ê³„**:
   - owner > admin > member
   - ìƒìœ„ ê¶Œí•œë§Œ í•˜ìœ„ ê¶Œí•œ ë³€ê²½ ê°€ëŠ¥

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

1. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
   - ì¦ìƒ: `Connection refused` ì—ëŸ¬
   - í•´ê²°: `app/models/database.py`ì˜ DB ì„¤ì • í™•ì¸
   
2. **FOREIGN KEY ê¶Œí•œ ì˜¤ë¥˜**
   - ì¦ìƒ: `REFERENCES` ê¶Œí•œ ì—ëŸ¬
   - í•´ê²°: ì´ë¯¸ ì²˜ë¦¬ë¨ (ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ FOREIGN KEY ì œê±°)

3. **UserKeyword ì •ì˜ ì˜¤ë¥˜** (Linter Warning)
   - ì¦ìƒ: `UserKeyword`ì´(ê°€) ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
   - í•´ê²°: ê¸°ì¡´ ì´ìŠˆë¡œ, ëŸ°íƒ€ì„ì—ëŠ” ì˜í–¥ ì—†ìŒ

---

## ğŸ“ˆ ë‹¤ìŒ ë‹¨ê³„ (Phase 2)

êµ¬í˜„ ê°€ëŠ¥í•œ ê¸°ëŠ¥:

### ë†’ì€ ìš°ì„ ìˆœìœ„
1. **ì •ê¸°ëª¨ì„ ê´€ë¦¬ ì‹œìŠ¤í…œ** (2-3ì‹œê°„)
   - ëª¨ë¸ ì´ë¯¸ ì¡´ì¬ (`GroupMeeting`, `GroupMeetingAttendee`)
   - APIë§Œ êµ¬í˜„í•˜ë©´ ë¨
   - 8ê°œ ì—”ë“œí¬ì¸íŠ¸ í•„ìš”

2. **ê·¸ë£¹ ê°€ì… ìŠ¹ì¸ ì‹œìŠ¤í…œ** (2ì‹œê°„)
   - ìƒˆ ëª¨ë¸ í•„ìš” (`GroupJoinRequest`)
   - `requires_approval` í•„ë“œ í™œìš©
   - 3ê°œ ì—”ë“œí¬ì¸íŠ¸ í•„ìš”

### ì¤‘ê°„ ìš°ì„ ìˆœìœ„
3. ì–¸ì–´ ì„¤ì • API
4. ë¬¸ì˜í•˜ê¸° API

### ë‚®ì€ ìš°ì„ ìˆœìœ„
5. êµ¬í•´ìš” ê²Œì‹œê¸€ ì‹œìŠ¤í…œ (4-5ì‹œê°„, ìƒˆ ëª¨ë¸ í•„ìš”)
6. ì¥ì†Œ ê²Œì‹œê¸€ ì‹œìŠ¤í…œ (6-8ì‹œê°„, ìƒˆ ëª¨ë¸ í•„ìš”)
7. êµ¬ì¸êµ¬ì§ ì‹œìŠ¤í…œ (5-6ì‹œê°„, ìƒˆ ëª¨ë¸ í•„ìš”)

---

## ğŸ“š ê´€ë ¨ íŒŒì¼

- `app/main.py`: API ì—”ë“œí¬ì¸íŠ¸ (5598-5951ë²ˆ ì¤„)
- `app/models/models.py`: ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
- `app/models/schemas.py`: API ìŠ¤í‚¤ë§ˆ
- `êµ¬í˜„_ì™„ë£Œ_ìš”ì•½.md`: ì „ì²´ êµ¬í˜„ í˜„í™©
- `ë°±ì—”ë“œ_ì¶”ê°€_êµ¬í˜„_í•„ìš”_ê¸°ëŠ¥.md`: ìƒì„¸ ê³„íš

---

**ì‘ì„±ì¼**: 2024ë…„ 1ì›” 8ì¼  
**êµ¬í˜„ ì‹œê°„**: ì•½ 1.5ì‹œê°„  
**API ê°œìˆ˜**: 4ê°œ (ê°¤ëŸ¬ë¦¬ 3ê°œ + ë©¤ë²„ ê´€ë¦¬ 1ê°œ)

